<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel Admin - Lingkungan Kita</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body class="admin-body">
    <!-- Header -->
    <header>
        <div class="logo">
            <span class="logo-icon">ðŸŒ±</span>
            <span>LingkunganKita - Admin</span>
        </div>
        <div class="nav-buttons">
            <span class="admin-welcome">
                <i class="fas fa-user-circle"></i>
                <span id="adminUsername">Loading...</span>
            </span>
            <a href="index.html" class="btn btn-outline">
                <i class="fas fa-home"></i>
                <span class="text">Halaman Utama</span>
            </a>
            <button class="btn btn-primary" id="logoutBtn">
                <i class="fas fa-sign-out-alt"></i>
                <span class="text">Keluar</span>
            </button>
        </div>
    </header>

    <!-- Loading Screen -->
    <div id="loadingScreen">
        <div class="loading-content">
            <i class="fas fa-spinner fa-spin fa-2x"></i>
            <p>Memuat panel admin...</p>
        </div>
    </div>
<!-- Admin Panel -->
<div class="admin-panel" id="adminPanel">
    <div class="admin-header">
        <h1><i class="fas fa-cog"></i> Panel Administrator</h1>
        <div class="admin-actions">
            <button class="btn btn-success" id="exportData">
                <i class="fas fa-download"></i>
                <span class="text">Ekspor Data</span>
            </button>
            <button class="btn btn-primary" id="refreshData">
                <i class="fas fa-sync-alt"></i>
                <span class="text">Refresh</span>
            </button>
        </div>
    </div> 

        
        <!-- Navigation Tabs -->
        <div class="admin-tabs">
            <button class="admin-tab active" data-tab="issues">
                <i class="fas fa-list"></i>
                <span>Kelola Laporan</span>
                <span class="badge" id="issuesCount">0</span>
            </button>
            <button class="admin-tab" data-tab="analytics">
                <i class="fas fa-chart-line"></i>
                <span>Analitik</span>
            </button>
            <button class="admin-tab" data-tab="settings">
                <i class="fas fa-sliders-h"></i>
                <span>Pengaturan</span>
            </button>
        </div>
        
        <!-- Tab Content -->
        <div class="admin-content">
            
            <!-- Issues Management Tab -->
            <div id="issues-tab" class="admin-tab-content active">
                <div class="tab-header">
                    <h2><i class="fas fa-list"></i> Kelola Laporan Isu Lingkungan</h2>
                    <div class="tab-actions">
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" placeholder="Cari laporan..." id="searchIssues">
                        </div>
                        <select id="statusFilter" class="form-control">
                            <option value="">Semua Status</option>
                            <option value="new">Baru</option>
                            <option value="in-progress">Diproses</option>
                            <option value="completed">Selesai</option>
                        </select>
                        <select id="kecamatanFilter" class="form-control">
                            <option value="">Semua Kecamatan</option>
                            <option value="Ujung Bulu">Ujung Bulu</option>
                            <option value="Ujung Loe">Ujung Loe</option>
                            <option value="Gantorang">Gantorang</option>
                            <option value="Kindang">Kindang</option>
                            <option value="Bonto Bahari">Bonto Bahari</option>
                            <option value="Bontotiro">Bontotiro</option>
                            <option value="Hero Lange-Lange">Hero Lange-Lange</option>
                            <option value="Kajang">Kajang</option>
                            <option value="Bulukumpa">Bulukumpa</option>
                            <option value="Rilau Ale">Rilau Ale</option>
                        </select>
                    </div>
                </div>
                
                <div class="table-container">
                    <table class="issues-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Jenis Isu</th>
                                <th>Lokasi</th>
                                <th>Status</th>
                                <th>Tanggal</th>
                                <th>Pelapor</th>
                                <th>Aksi</th>
                            </tr>
                        </thead>
                        <tbody id="issuesTableBody">
                            <tr>
                                <td colspan="7" class="loading">Memuat data laporan...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="table-footer">
                    <div class="table-info" id="tableInfo">Menampilkan 0 laporan</div>
                    <div class="pagination">
                        <button class="btn btn-outline btn-sm" id="prevPage" disabled>
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <span class="page-info">Halaman 1</span>
                        <button class="btn btn-outline btn-sm" id="nextPage">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Analytics Tab -->
            <div id="analytics-tab" class="admin-tab-content">
                <div class="tab-header">
                    <h2><i class="fas fa-chart-line"></i> Analitik Laporan</h2>
                    <div class="date-filter">
                        <select class="form-control" id="analyticsPeriod">
                            <option value="7">7 Hari Terakhir</option>
                            <option value="30" selected>30 Hari Terakhir</option>
                            <option value="90">3 Bulan Terakhir</option>
                        </select>
                    </div>
                </div>
                
                <div class="analytics-grid">
                    <div class="analytics-card">
                        <div class="analytics-header">
                            <h3><i class="fas fa-chart-bar"></i> Ringkasan Laporan</h3>
                        </div>
                        <div class="analytics-stats">
                            <div class="stat-item">
                                <div class="stat-value" id="totalReports">0</div>
                                <div class="stat-label">Total Laporan</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="avgResolution">0 hr</div>
                                <div class="stat-label">Rata-rata Waktu</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="completionRate">0%</div>
                                <div class="stat-label">Tingkat Penyelesaian</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="analytics-card">
                        <div class="analytics-header">
                            <h3><i class="fas fa-chart-pie"></i> Distribusi Jenis Isu</h3>
                        </div>
                        <div class="chart-container">
                            <div class="chart-bars">
                                <div class="chart-bar-enhanced" data-label="Sampah" data-count="0"></div>
                                <div class="chart-bar-enhanced" data-label="Air" data-count="0"></div>
                                <div class="chart-bar-enhanced" data-label="Fasilitas" data-count="0"></div>
                                <div class="chart-bar-enhanced" data-label="Pohon" data-count="0"></div>
                                <div class="chart-bar-enhanced" data-label="Lainnya" data-count="0"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="analytics-card full-width">
                        <div class="analytics-header">
                            <h3><i class="fas fa-trending-up"></i> Trend Laporan Bulanan</h3>
                        </div>
                        <div class="trend-container">
                            <div class="trend-stats">
                                <div class="trend-item">
                                    <div class="trend-value" id="monthlyReports">0</div>
                                    <div class="trend-label">Laporan Bulan Ini</div>
                                </div>
                                <div class="trend-item">
                                    <div class="trend-value" id="resolvedThisMonth">0</div>
                                    <div class="trend-label">Diselesaikan</div>
                                </div>
                                <div class="trend-item">
                                    <div class="trend-value" id="resolutionRate">0%</div>
                                    <div class="trend-label">Tingkat Resolusi</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="analytics-card">
                        <div class="analytics-header">
                            <h3><i class="fas fa-clock"></i> Status Laporan</h3>
                        </div>
                        <div class="status-distribution">
                            <div class="status-item">
                                <span class="status-dot new"></span>
                                <span class="status-label">Baru</span>
                                <span class="status-count" id="newReports">0</span>
                            </div>
                            <div class="status-item">
                                <span class="status-dot in-progress"></span>
                                <span class="status-label">Diproses</span>
                                <span class="status-count" id="inProgressReports">0</span>
                            </div>
                            <div class="status-item">
                                <span class="status-dot completed"></span>
                                <span class="status-label">Selesai</span>
                                <span class="status-count" id="completedReports">0</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Settings Tab -->
            <div id="settings-tab" class="admin-tab-content">
                <div class="tab-header">
                    <h2><i class="fas fa-sliders-h"></i> Pengaturan Sistem</h2>
                </div>
                
                <div class="settings-grid">
                    <div class="settings-card">
                        <h3><i class="fas fa-bell"></i> Notifikasi</h3>
                        <div class="setting-item">
                            <label>Email Notifikasi</label>
                            <input type="email" class="form-control" value="admin@lingkungankita.id">
                        </div>
                        <div class="setting-item">
                            <label class="toggle-label">
                                <span>Notifikasi Laporan Baru</span>
                                <input type="checkbox" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <label class="toggle-label">
                                <span>Notifikasi Email Otomatis</span>
                                <input type="checkbox">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="settings-card">
                        <h3><i class="fas fa-map-marker-alt"></i> Wilayah Kecamatan</h3>
                        <div class="setting-item">
                            <label>Kecamatan Default</label>
                            <select class="form-control" id="defaultKecamatan">
                                <option value="">Pilih Kecamatan</option>
                                <option value="Ujung Bulu">Ujung Bulu</option>
                                <option value="Ujung Loe">Ujung Loe</option>
                                <option value="Gantarang">Gantarang</option>
                                <option value="Kindang">Kindang</option>
                                <option value="Bonto Bahari">Bonto Bahari</option>
                                <option value="Bontotiro">Bontotiro</option>
                                <option value="Hero Lange-Lange">Hero Lange-Lange</option>
                                <option value="Kajang">Kajang</option>
                                <option value="Bulukumpa">Bulukumpa</option>
                                <option value="Rilau Ale">Rilau Ale</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <label>Filter Berdasarkan Kecamatan</label>
                            <select class="form-control" id="filterKecamatan" multiple>
                                <option value="Ujung Bulu" selected>Ujung Bulu</option>
                                <option value="Ujung Loe" selected>Ujung Loe</option>
                                <option value="Gantarang" selected>Gantarang</option>
                                <option value="Kindang" selected>Kindang</option>
                                <option value="Bonto Bahari" selected>Bonto Bahari</option>
                                <option value="Bontotiro" selected>Bontotiro</option>
                                <option value="Hero Lange-Lange" selected>Hero Lange-Lange</option>
                                <option value="Kajang" selected>Kajang</option>
                                <option value="Bulukumpa" selected>Bulukumpa</option>
                                <option value="Rilau Ale" selected>Rilau Ale</option>
                            </select>
                            <small class="help-text">Tahan Ctrl untuk memilih multiple kecamatan</small>
                        </div>
                    </div>
                    
                    <div class="settings-card">
                        <h3><i class="fas fa-shield-alt"></i> Keamanan</h3>
                        <div class="setting-item">
                            <button class="btn btn-outline" id="changePassword">
                                <i class="fas fa-key"></i>
                                Ganti Password
                            </button>
                        </div>
                        <div class="setting-item">
                            <label class="toggle-label">
                                <span>Two-Factor Authentication</span>
                                <input type="checkbox">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <label>Session Timeout</label>
                            <select class="form-control">
                                <option value="30">30 menit</option>
                                <option value="60" selected>1 jam</option>
                                <option value="120">2 jam</option>
                                <option value="240">4 jam</option>
                            </select>
                        </div>
                    </div>

                    <div class="settings-card">
                        <h3><i class="fas fa-chart-bar"></i> Statistik Wilayah</h3>
                        <div class="setting-item">
                            <div id="kecamatanStats">
                                <div class="stat-item-small">
                                    <span class="stat-label-small">Total Kecamatan:</span>
                                    <span class="stat-value-small">10</span>
                                </div>
                                <div class="stat-item-small">
                                    <span class="stat-label-small">Kecamatan Aktif:</span>
                                    <span class="stat-value-small">10</span>
                                </div>
                                <div class="stat-item-small">
                                    <span class="stat-label-small">Laporan Hari Ini:</span>
                                    <span class="stat-value-small">0</span>
                                </div>
                            </div>
                        </div>
                        <div class="setting-item">
                            <button class="btn btn-outline btn-sm" onclick="updateKecamatanStats()">
                                <i class="fas fa-sync-alt"></i>
                                Update Statistik
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Modal -->
    <div class="modal" id="adminModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Detail Laporan</h2>
                <button class="close-modal" onclick="closeAdminModal()">&times;</button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Content akan diisi oleh JavaScript -->
            </div>
        </div>
    </div>

    <!-- Floating Action Button for Mobile -->
    <button class="floating-action-btn" id="mobileMenuBtn" title="Menu Utama">
        <i class="fas fa-bars"></i>
    </button>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    
    <!-- Firebase Config -->
    <script src="firebase-config.js"></script>
    
    <!-- JavaScript -->
    <script src="admin-app.js"></script>

        <!-- Footer -->
    <footer class="main-footer">
        <div class="footer-content">
            <div class="footer-section">
                <div class="footer-logo">
                    <span class="footer-logo-icon">ðŸŒ±</span>
                    <span class="footer-logo-text">LingkunganKita</span>
                </div>
                <p>Admin: <span id="footerAdminEmail">admin@lingkungankita.id</span></p>
            </div>
            
            <div class="footer-section">
                <h4>Statistik</h4>
                <p><i class="fas fa-chart-bar"></i> Laporan: <span id="footerTotalIssues">0</span></p>
                <p><i class="fas fa-clock"></i> Sistem Aktif</p>
            </div>
        </div>
        
        <div class="footer-bottom">
            <p>&copy; 2024 LingkunganKita - Admin Panel  <span id="footerTimestamp"></span></p>
        </div>
    </footer>
</body>
</html>